<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mem√≥ria Oce√¢nica</title>
    <!-- Inclui Tailwind CSS para estiliza√ß√£o -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Anima√ß√£o para o modal de vit√≥ria */
        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.03);
            }
        }
        .animate-pulse-custom {
            animation: pulse 1.5s infinite ease-in-out;
        }
        /* Estilos para a frente e verso do cart√£o */
        .card-inner {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s; /* Esta transi√ß√£o lida com a anima√ß√£o de virar e desvirar */
        }
        .card-flipped .card-inner {
            transform: rotateY(180deg);
        }
        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 0.5rem; /* p-2 */
            border-radius: 0.75rem; /* rounded-xl */
        }
        .card-front {
            background: linear-gradient(to bottom right, var(--tw-gradient-stops));
            --tw-gradient-from: #2563eb; /* blue-600 */
            --tw-gradient-to: #1e40af; /* blue-800 */
            color: rgba(255, 255, 255, 0.7); /* text-white/70 */
        }
        .card-back {
            background-color: white;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); /* shadow-lg */
            transform: rotateY(180deg);
            color: #1f2937; /* gray-800 */
        }
        .card-matched .card-back {
            box-shadow: 0 0 0 4px #86efad; /* ring-4 ring-green-400 */
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-b from-blue-400 via-blue-500 to-blue-800 p-4">
    <div class="max-w-4xl mx-auto">
        <!-- Header -->
        <div class="text-center mb-8">
            <div class="flex items-center justify-center gap-2 mb-4">
                <!-- Waves Icon -->
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white">
                    <path d="M2 20v2H0V20Z"/><path d="M10 20v2H8V20Z"/><path d="M18 20v2H16V20Z"/><path d="M2 10s.5-2 2-2 4 2 6 2 4-2 6-2 4 2 6 2"/><path d="M2 14s.5-2 2-2 4 2 6 2 4-2 6-2 4 2 6 2"/><path d="M2 18s.5-2 2-2 4 2 6 2 4-2 6-2 4 2 6 2"/>
                </svg>
                <h1 class="text-4xl font-bold text-white">Mem√≥ria Oce√¢nica</h1>
                <!-- Waves Icon -->
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white">
                    <path d="M2 20v2H0V20Z"/><path d="M10 20v2H8V20Z"/><path d="M18 20v2H16V20Z"/><path d="M2 10s.5-2 2-2 4 2 6 2 4-2 6-2 4 2 6 2"/><path d="M2 14s.5-2 2-2 4 2 6 2 4-2 6-2 4 2 6 2"/><path d="M2 18s.5-2 2-2 4 2 6 2 4-2 6-2 4 2 6 2"/>
                </svg>
            </div>
            <p class="text-blue-100 text-lg">Descubra os mist√©rios do oceano encontrando os pares!</p>
        </div>

        <!-- Stats -->
        <div class="flex justify-center gap-8 mb-6">
            <div class="bg-white/20 backdrop-blur-sm rounded-lg px-4 py-2 text-white text-center">
                <div class="flex items-center gap-2 justify-center">
                    <!-- Timer Icon -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white">
                        <circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/>
                    </svg>
                    <span id="elapsed-time" class="font-semibold">0:00</span>
                </div>
                <div class="text-sm opacity-80">Tempo</div>
            </div>
            <div class="bg-white/20 backdrop-blur-sm rounded-lg px-4 py-2 text-white text-center">
                <div id="moves-count" class="font-semibold">0</div>
                <div class="text-sm opacity-80">Jogadas</div>
            </div>
            <div class="bg-white/20 backdrop-blur-sm rounded-lg px-4 py-2 text-white text-center">
                <div id="matches-count" class="font-semibold">0/8</div>
                <div class="text-sm opacity-80">Pares</div>
            </div>
        </div>

        <!-- Game Board -->
        <div id="game-board" class="grid grid-cols-4 gap-4 mb-6 max-w-2xl mx-auto">
            <!-- Cards will be rendered here by JavaScript -->
        </div>

        <!-- Controls -->
        <div class="text-center">
            <button id="reset-button" class="bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white px-6 py-3 rounded-lg font-semibold transition-all duration-200 flex items-center gap-2 mx-auto">
                <!-- RotateCcw Icon -->
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white">
                    <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.76 2.75L3 8"/><path d="M3 3v5h5"/>
                </svg>
                Novo Jogo
            </button>
        </div>

        <!-- Victory Modal -->
        <div id="victory-modal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
            <div class="bg-white rounded-2xl p-8 text-center max-w-md mx-4 animate-pulse-custom">
                <!-- Trophy Icon -->
                <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-yellow-500 mx-auto mb-4">
                    <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 11.7V17l5 2v-5.3"/><path d="M12 17v5"/><path d="M12 11.7A4.7 4.7 0 0 0 8 7c0-1.7.9-3.2 2.4-4.2C11.1 2.3 11.6 2 12 2c.4 0 .9.3 1.6.8C15.1 3.8 16 5.3 16 7a4.7 4.7 0 0 0-4 4.7Z"/>
                </svg>
                <h2 class="text-3xl font-bold text-gray-800 mb-2">Parab√©ns!</h2>
                <p class="text-gray-600 mb-4">
                    Voc√™ explorou todo o oceano em <strong id="final-moves">0</strong> jogadas
                    e <strong id="final-time">0:00</strong>!
                </p>
                <div class="space-y-2 text-sm text-gray-500 mb-6">
                    <p>üåä Voc√™ descobriu <span id="total-elements"></span> esp√©cies marinhas!</p>
                    <p>üêã Continue explorando os mist√©rios do oceano!</p>
                </div>
                <button id="play-again-button" class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors">
                    Jogar Novamente
                </button>
            </div>
        </div>

        <!-- Info Footer -->
        <div class="mt-8 text-center">
            <div class="bg-white/10 backdrop-blur-sm rounded-lg p-4 max-w-2xl mx-auto">
                <h3 class="text-white font-semibold mb-2">Sobre a Cultura Oce√¢nica</h3>
                <p class="text-blue-100 text-sm">
                    Os oceanos cobrem mais de 70% da Terra e abrigam uma biodiversidade incr√≠vel.
                    Cada criatura marinha tem um papel fundamental no equil√≠brio dos ecossistemas oce√¢nicos.
                </p>
            </div>
        </div>
    </div>

    <script>
        // Elementos da cultura oce√¢nica
        const oceanElements = [
            { id: 1, name: 'Baleia', emoji: 'üêã', description: 'Maior mam√≠fero marinho' },
            { id: 2, name: 'Polvo', emoji: 'üêô', description: 'Invertebrado inteligente' },
            { id: 3, name: 'Tubar√£o', emoji: 'ü¶à', description: 'Predador dos oceanos' },
            { id: 4, name: 'Golfinho', emoji: 'üê¨', description: 'Mam√≠fero social' },
            { id: 5, name: 'Estrela-do-mar', emoji: '‚≠ê', description: 'Equinodermo regenerativo' },
            { id: 6, name: 'Tartaruga', emoji: 'üê¢', description: 'Reptil marinho ancestral' },
            { id: 7, name: 'Cavalo-marinho', emoji: 'ü¶Ñ', description: 'Peixe √∫nico' },
            { id: 8, name: 'Coral', emoji: 'ü™∏', description: 'Organismo colonial' }
        ];

        // Vari√°veis de estado globais
        let cards = [];
        let flippedCards = [];
        let moves = 0;
        let matches = 0;
        let gameWon = false;
        let startTime = null;
        let elapsedTime = 0;
        let timerInterval;

        // Refer√™ncias aos elementos do DOM
        const gameBoard = document.getElementById('game-board');
        const movesCount = document.getElementById('moves-count');
        const matchesCount = document.getElementById('matches-count');
        const elapsedTimeDisplay = document.getElementById('elapsed-time');
        const resetButton = document.getElementById('reset-button');
        const victoryModal = document.getElementById('victory-modal');
        const finalMovesDisplay = document.getElementById('final-moves');
        const finalTimeDisplay = document.getElementById('final-time');
        const totalElementsDisplay = document.getElementById('total-elements');
        const playAgainButton = document.getElementById('play-again-button');

        /**
         * Cria e embaralha os pares de cartas para o jogo.
         * @returns {Array} Um array de objetos de cartas embaralhadas.
         */
        const createCards = () => {
            const newCards = [];
            oceanElements.forEach(element => {
                newCards.push({ ...element, cardId: `${element.id}-1`, isFlipped: false, isMatched: false });
                newCards.push({ ...element, cardId: `${element.id}-2`, isFlipped: false, isMatched: false });
            });
            return newCards.sort(() => Math.random() - 0.5);
        };

        /**
         * Formata o tempo em segundos para o formato MM:SS.
         * @param {number} seconds - O tempo em segundos.
         * @returns {string} O tempo formatado.
         */
        const formatTime = (seconds) => {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${mins}:${secs.toString().padStart(2, '0')}`;
        };

        /**
         * Atualiza a exibi√ß√£o do tempo decorrido.
         */
        const updateTimerDisplay = () => {
            elapsedTimeDisplay.textContent = formatTime(elapsedTime);
        };

        /**
         * Inicia o timer do jogo.
         */
        const startTimer = () => {
            if (!timerInterval) {
                timerInterval = setInterval(() => {
                    elapsedTime++;
                    updateTimerDisplay();
                }, 1000);
            }
        };

        /**
         * Para o timer do jogo.
         */
        const stopTimer = () => {
            clearInterval(timerInterval);
            timerInterval = null;
        };

        /**
         * Renderiza o tabuleiro do jogo e atualiza as estat√≠sticas.
         */
        const renderGame = () => {
            gameBoard.innerHTML = ''; // Limpa o tabuleiro existente

            cards.forEach(card => {
                const cardElement = document.createElement('div');
                cardElement.dataset.cardId = card.cardId;
                cardElement.classList.add(
                    'aspect-square', 'rounded-xl', 'cursor-pointer', 'transform', 'transition-all', 'duration-300', 'hover:scale-105'
                );

                // Adiciona classes para virar e combinar
                if (card.isFlipped || card.isMatched) {
                    cardElement.classList.add('card-flipped');
                }

                // Cria o conte√∫do interno do cart√£o (frente e verso)
                cardElement.innerHTML = `
                    <div class="card-inner">
                        <div class="card-face card-front">
                            <!-- Waves Icon for card back -->
                            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M2 20v2H0V20Z"/><path d="M10 20v2H8V20Z"/><path d="M18 20v2H16V20Z"/><path d="M2 10s.5-2 2-2 4 2 6 2 4-2 6-2 4 2 6 2"/><path d="M2 14s.5-2 2-2 4 2 6 2 4-2 6-2 4 2 6 2"/><path d="M2 18s.5-2 2-2 4 2 6 2 4-2 6-2 4 2 6 2"/>
                            </svg>
                        </div>
                        <div class="card-face card-back ${card.isMatched ? 'card-matched' : ''}">
                            <div class="text-4xl mb-2">${card.emoji}</div>
                            <div class="text-xs font-semibold text-center leading-tight">
                                ${card.name}
                            </div>
                        </div>
                    </div>
                `;

                cardElement.addEventListener('click', () => handleCardClick(card.cardId));
                gameBoard.appendChild(cardElement);
            });

            // Atualiza as estat√≠sticas exibidas
            movesCount.textContent = moves;
            matchesCount.textContent = `${matches}/${oceanElements.length}`;
            updateTimerDisplay();

            // Exibe ou oculta o modal de vit√≥ria
            if (gameWon) {
                stopTimer();
                finalMovesDisplay.textContent = moves;
                finalTimeDisplay.textContent = formatTime(elapsedTime);
                totalElementsDisplay.textContent = oceanElements.length;
                victoryModal.classList.remove('hidden');
            } else {
                victoryModal.classList.add('hidden');
            }
        };

        /**
         * Lida com o clique em uma carta.
         * @param {string} clickedCardId - O ID da carta clicada.
         */
        const handleCardClick = (clickedCardId) => {
            if (!startTime) {
                startTime = Date.now();
                startTimer();
            }

            const clickedCardIndex = cards.findIndex(card => card.cardId === clickedCardId);
            const clickedCard = cards[clickedCardIndex];

            // Ignora se j√° h√° 2 cartas viradas, ou se a carta j√° est√° virada/combinada
            if (flippedCards.length === 2 || clickedCard.isFlipped || clickedCard.isMatched) {
                return;
            }

            // Vira a carta clicada
            cards[clickedCardIndex].isFlipped = true;
            flippedCards.push(clickedCard);
            renderGame(); // Renderiza para mostrar a carta virada

            if (flippedCards.length === 2) {
                moves++;
                movesCount.textContent = moves; // Atualiza a contagem de jogadas imediatamente

                if (flippedCards[0].id === flippedCards[1].id) {
                    // Par encontrado
                    setTimeout(() => {
                        cards = cards.map(card =>
                            card.id === flippedCards[0].id
                                ? { ...card, isMatched: true, isFlipped: true }
                                : card
                        );
                        matches++;
                        flippedCards = [];
                        if (matches === oceanElements.length) {
                            gameWon = true;
                        }
                        renderGame(); // Renderiza para mostrar o par combinado
                    }, 600);
                } else {
                    // N√£o √© par, virar de volta
                    setTimeout(() => {
                        cards = cards.map(card =>
                            flippedCards.some(flipped => flipped.cardId === card.cardId)
                                ? { ...card, isFlipped: false }
                                : card
                        );
                        flippedCards = [];
                        renderGame(); // Renderiza para virar as cartas de volta
                    }, 1000);
                }
            }
        };

        /**
         * Reinicia o jogo para um novo turno.
         */
        const resetGame = () => {
            stopTimer();
            cards = createCards();
            flippedCards = [];
            moves = 0;
            matches = 0;
            gameWon = false;
            startTime = null;
            elapsedTime = 0;
            renderGame(); // Renderiza o novo jogo
        };

        // Event Listeners
        resetButton.addEventListener('click', resetGame);
        playAgainButton.addEventListener('click', resetGame);

        // Inicializa o jogo quando o DOM estiver completamente carregado
        document.addEventListener('DOMContentLoaded', resetGame);
    </script>
</body>
</html>
